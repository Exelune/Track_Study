# 21일날 배운것 정리
유니티 기능중 하나인 파티클 시스템, 유니티에서 데이터 저장용으로 쓰는 JSON 기능에 대해 배웠다.

<br>

## 시작 시간
<img width="2558" height="1439" alt="image" src="https://github.com/user-attachments/assets/589026c8-6abe-4d8d-b2c4-2908ef30b084" />
오후 1시 35분

<br>

## 파티클 시스템
파티클 시스템은 아주 작은 이미지(파티클)을 정해진 시간동안 반복적으로 생성하여 불, 마법 같은 여러 효과를 만드는 시스템이다.

여러 모듈을 사용하여 파티클에 크기, 색, 위치나 속도 등 다양한 속성을 조절할수 있다.

주로 VFX를 만들때 쓰인다.

<br>

자주 쓰일만한 모듈만 몆개 간단하게 정리하면
- Main : 파티클의 기본 설정을 하는곳 (파티클의 기본 속성을 지정)
- Emission : 파티클이 얼마나, 자주 생성될지 설정하는 곳
- Shape : 파티클이 어디에서 어떻게 생성될지 설정하는 곳
- Color over Lifetime : 파티클의 색이 어떻게 변할지 설정하는 곳
- Renderer : 설정에 따라 파티클이 어떤 이미지/메시로 보일지 렌더링 방식을 설정한는 곳

<br>

## 파티클 시스템의 장점
- 프로그래밍 없이 여러 효과 제작 가능
- 성능이 좋고 최적화가 쉽다.
- 간단하게 사용하기 좋다.

## 파티클 시스템의 단점
- 과도하게 쓰면 드로우 콜 / 오버드로우 21일날 배운것 정리
유니티 기능중 하나인 파티클 시스템, 유니티에서 데이터 저장용으로 쓰는 JSON 기능에 대해 배웠다.

<br>

## 시작 시간
<img width="2558" height="1439" alt="image" src="https://github.com/user-attachments/assets/589026c8-6abe-4d8d-b2c4-2908ef30b084" />
오후 1시 35분

<br>

## 파티클 시스템
파티클 시스템은 아주 작은 이미지(파티클)을 정해진 시간동안 반복적으로 생성하여 불, 마법 같은 여러 효과를 만드는 시스템이다.
여러 모듈을 사용하여 파티클에 크기, 색, 위치나 속도 등 다양한 속성을 조절할수 있다.
주로 VFX를 만들때 쓰인다.

<br>

자주 쓰일만한 모듈만 몆 개 간단하게 정리하면
- Main : 파티클의 기본 설정 (파티클의 기본 속성)
- Emission : 파티클이 얼마나, 자주 생성될지 설정
- Shape : 파티클이 어디에서 어떻게 생성될지 설정
- Color over Lifetime : 파티클의 색이 어떻게 변할지 설정
- Renderer : 설정에 따라 파티클이 어떤 이미지/메시로 보일지 렌더링 방식을 설정

<br>

## 파티클 시스템의 장점
- 프로그래밍 없이 여러 효과 제작 가능
- 성능이 좋고 최적화가 쉽다.
- 간단하게 사용하기 좋다.

## 파티클 시스템의 단점
- 과도하게 쓰면 드로우 콜 / 오버드로우 증가
- 일부 기기에서는 파티클 수 조정 필요
- 복잡한 물리적 상호작용은 어려움

<br>

## 결론
파티클 시스템은 작은 이미지들을 뿌려서 여러 효과를 연출할 수 있게 해주며 기능 내에 들어있는 모듈을 사용하여 여러 다양한 기능을 추가할수 있다.
다른 방법으로도 파티클을 만들수 있지만 파티클 시스템을 쓰면 간단하게 VFX 제작을 할 수 있게 해준다.

<br>

## 활용법
게임 내에서 연출이 필요한 상황이면 대부분의 상황에서 사용이 가능한 것 같다.
단순 맞는 이펙트, 이동 이펙트들 같이 단순한 효과부터 마법, 불, 보스 등장 연출 등등 다방면에서 활용할 수 있을것 같다.

<br>

## JSON(배운것 기준으로만)
JSON은 데이터를 텍스트 형태로 저장하거나 전달할 때 사용되는 개방형 표준 포멧이다.

구조는 "key": "value" 이런식으로 되어있다. (배열까지 값으로 들어감)

<br>

## 사용법
사용할거면 System.IO로 파일을 읽고 써야한다. 그리고 JsonUtility를 사용하여 C#을 JSON으로 변환 시켜준다.

JsonUtility

``` CSharp 
string json = JsonUtility.ToJson(dataObject, true); // C# 객체에서 Json 문자열로 변환(true는 들여쓰기 여부)
```

``` CSharp 
PlayerData data = JsonUtility.FromJson<PlayerData>(jsonString); // Json 문자열에서 C# 객체로 변환
```

System.IO

``` CSharp 
File.WriteAllText(path, json); // Json을 path(경로)에 파일로 저장
```

``` CSharp 
string json = File.ReadAllText(path); // path(경로)에서 파일을 가져와 Json을 읽어오기
```

<br>

C# 클래스를 하나 만들어서 [System.Serializable]로 직렬화를 해주어야 한다.

``` CSharp 
[System.Serializable]
public class PlayerData {
    public int hp;
    public int attack;
}
```

데이터를 클래스에 담아준다.

``` CSharp 
PlayerData data = new PlayerData();
data.hp = 10;
data.attack = 3;
```

코드로 변환해주고 저장 / 읽기

``` CSharp
string path = Application.persistentDataPath + "/save.json" // 경로 지정
string json = JsonUtility.ToJson(data, true); // json으로 변환(들여쓰기)
File.WriteAllText(path, json); // 파일로 저장

string loadJson = File.ReadAllText(path); // 파일에서 문자열 읽어오기
PlayerData loadData = JsonUtility.FromJson<PlayerData>(json); // C# 객체로 변환
```

<br>

Json의 장점
- 변환이 매우 간단함
- 읽기 쉽고 빠르며 용량이 적음

<br>

Json의 단점
- 프로퍼티 및 딕셔너리 지원 안됨
- 리스트 / 배열은 가능하지만 구조가 제한적
- public 필드 / [SerializeField] private 필드만 저장됨
- 평문으로만 저장되어 보안 위험

<br>

## 결론
Json은 C# 객체를 텍스트로 변환하여 저장하는 방식이며 저장해야할 데이터가 있을때 사용한다.
JsonUtility 와 System.IO를 사용하여 c# 객체를 변환하고 문자열을 저장하거나 읽어온다.
큰 데이터가 있을경우 파일을 분할하여 저장하는게 좋다.

<br>

## 활용법
플레이어의 세이브 데이터나 인 게임의 데이터를 저장해야하는 상황이 올때 사용하면 될 것 같다.

<br>

## 끝난 시간

<img width="2559" height="1439" alt="image" src="https://github.com/user-attachments/assets/1aeb1135-150f-4394-bc1c-e7ebbf7dd13c" />

3시 11분

총합 시간 : 1시간 36분
